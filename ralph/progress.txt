# Ralph Progress: bom-enhancement
# Started: 2026-02-25
# Completed: 2026-02-25

## US-001: SOP 코드 파서 유틸 ✅
- Created src/utils/sopCodeParser.ts
- parseSopCode(), validateBomEntry(), validateBomDataBatch()
- Types: ParsedSopCode, BomValidationResult, BomCoverageResult, BomHealthScore

## US-002: BOM 분석 서비스 ✅
- Created src/services/bomAnalysisService.ts
- computeSalesBasedConsumption, computeConsumptionVariance
- computeBomCoverage, validateBomData, computeBomHealthScore

## US-003: computeBomVariance 수정 ✅
- Added salesDetail parameter to computeBomVariance in insightService.ts
- Sales-based expected quantity calculation replaces uniform distribution
- Legacy fallback preserved when salesDetail unavailable

## US-004: computeWasteAnalysis 수정 ✅
- Actual purchase-based unit cost calculation
- actualUnitCostUsed + unitCostUsed fields added to WasteAnalysisInsight

## US-005: BOM 개요(Overview) 탭 ✅
- BOM 건전성 점수 KPI (종합/데이터품질/커버리지/차이/이상)
- BOM 커버리지 분석 카드 (프로그레스 바 + 미등록 제품/자재)
- SOP 코드 검증 결과 (준수율, 오류 유형별)
- 판매 기반 투입 오차 요약 테이블

## US-006: 투입오차 탭 강화 ✅
- Sales-based variance data from fixed computeBomVariance
- Drilldown uses sales quantities instead of uniform distribution
- consumptionVariance computed from bomAnalysisService

## US-007: 폐기 비용 표시 수정 ✅
- actualUnitCostUsed badge on waste tab (실제원가 기반 / 설정값 기반)
- Unit cost displayed alongside badge

## Verification
- TypeScript: 0 errors
- Build: success (3m 10s)
- All 7/7 stories passed
